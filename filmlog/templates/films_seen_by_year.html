{% load iterator %}{% spaceless %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta id="viewport" name="viewport" content="initial-scale=1.0;minimum-scale=1.0; maximum-scale=1.0" />
	<title>{% if year < 2011 %}Some {% endif %}Films Seen in {{ stats.title }}</title>
	<meta name="description" content="An {% if year < 2011 %}incomplete {% endif %}interactive list and data visualization of movies seen in {{ stats.title }} by Zack McGhee." />
	<script>function imdb_ok(){a=true;if(b=window.localStorage){c=b.getItem("imdb_ok");if(c)return a;if(confirm("You're about to head over to IMDb. Is that cool?")){b.setItem("imdb_ok",a);return a}return false}}</script>
	<script type="text/javascript" src="//use.typekit.net/rhb1zic.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<style type="text/css">
body {
	min-width:1100px;
	margin: 0;
	padding: 0;
	color: #333;
	background-color: #fff;
	font-family: "adelle", "palatino", serif;
	font-size: small;
	voice-family: "\"}\"";
}

#c {
	max-width:1100px;
}

.non-mobile {
	display:inline;
}

@media only screen and (max-device-width: 480px) {
	.non-mobile {
		display:none !important;
	}
	body {
		font-family: "helvetica neue", sans-serif;
		min-width:100px;
	}
	h1 {
		font-size: 2.6em !important;
	}
	body.month-view h1 {
		font-size:1.5em !important;
	}
{% comment %}/* Starting to get stats available on mobile */
	#stats {
		min-width:100px;
		max-width:480px !important;
		width:auto !important;
		padding:0 !important;
		font-size:medium !important;
		float:none !important;
		border:0 !important;
	}
	#stats #overview { padding:0 !important; }
	#stats div, th.count, td.count {
		display:none;
	}
{% endcomment %}
	#stats, th.count, td.count {
		display:none;
	}
	th {
		padding-left:0 !important;
		padding-right:0 !important;
	}
	td {
		font-size:x-small !important;
	}
	td.movie .m1, tr.video td.movie .m2 {
		background-image:none !important;
	}
	td.movie .m2 {
		padding-left: .7em !important;
	}
	tr.repeat td.movie .movie-title:before,
	tr.repeat td.movie .movie-title:after {
		content:"/";
		font-weight:normal;
	}
	tr.video td.movie .m2 {
		padding-right:.7em !important;
	}
	tr.video td.movie .movie-title:after {
		content:"*";
		font-weight:normal;
	}
	tr.video.repeat td.movie .movie-title:after {
		content:"/*";
		font-weight:normal;
	}
	body p:last-child:before {
		content:"Slashes indicate a repeat viewing. An asterisk indicates a movie was seen on home video. ";
	}
}

html>body {
	font-size: small;
}

h1, #f {
	background: #369;
	color: #fff;
}

h1 {
	font-family: "helvetica neue", sans-serif;
	margin: 0;
	font-size: 2.9em;
	background: rgb(122,188,255); /* Old browsers */
	background: -moz-linear-gradient(top,  rgba(122,188,255,1) 0%, rgba(96,171,248,1) 44%, rgba(64,150,238,1) 100%); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(122,188,255,1)), color-stop(44%,rgba(96,171,248,1)), color-stop(100%,rgba(64,150,238,1))); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%); /* Opera 11.10+ */
	background: -ms-linear-gradient(top,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%); /* IE10+ */
	background: linear-gradient(to bottom,  rgba(122,188,255,1) 0%,rgba(96,171,248,1) 44%,rgba(64,150,238,1) 100%); /* W3C */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7abcff', endColorstr='#4096ee',GradientType=0 ); /* IE6-9 */
}

h1, #f, #c {
	padding: 2%;
}

#f, #stats {
	padding-top: 7px;
	padding-bottom: 7px;
}

#f a {
	color:#fff;
}

#log {
	max-width: 550px;
}

table {
	width: 100%;
}

.count div {
	-webkit-transform: rotate(-90deg);
	-moz-transform: rotate(-90deg);
	-ms-transform: rotate(-90deg);
	-o-transform: rotate(-90deg);
	filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
}

.count, .date, .rating {
	text-align: center;
}

.movie-title {
	font-size: medium;
	font-weight: bold;
}

.premiere-year {
	font-size: x-small;
	color: #333 !important;
}

.version {
	font-style: italic;
}

.directors {
	display: block;
}

th, td, td.movie .m2 {
	padding: .7em;
}

td.movie .m2 {
	padding-left: 57px;
}

th, td {
	border-bottom: 1px solid #ccc;
}

th {
	font-size: 1.1em;
}

tr.odd {
	background: #ffe;
}

tr.walkout td .m1, tr.walkout td.date span {
	-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
	filter: alpha(opacity=50);
	opacity: .5;
}

td.date span {
	display: block;
}

td.date .month {
	background: #c00;
	color: #fff;
}

td.date .month, #stats #overview li strong {
	-moz-border-top-left-radius: 25%;
	border-top-left-radius: 25%;
	-moz-border-top-right-radius: 25%;
	border-top-right-radius: 25%;
}

td.date .day {
	font-size: medium;
	border: 1px solid #eee;
	background: #fff;
}

td.date .day, #stats #overview li strong {
	-moz-border-bottom-left-radius: 25%;
	border-bottom-left-radius: 25%;
	-moz-border-bottom-right-radius: 25%;
	border-bottom-right-radius: 25%;
	background-image: -webkit-gradient( linear, right bottom, right top, color-stop(0.21, rgb(247,247,247)), color-stop(1, rgb(255,255,255)) );
}


td.movie {
	padding: 0 !important;
}

tr.repeat td.movie .m1 {
	background: url('http://static.zmcghee.com/movies/repeat.png') .7em center no-repeat;
}

tr.video td.movie .m2 {
	background: url('http://static.zmcghee.com/movies/vhs.png') bottom right no-repeat;
	padding-right: 80px;
}
#stats {
	font-size:x-large;
	float:right;
	width:480px;
	border:1px solid #eee;
	padding-top:1em !important;
	padding-bottom:1em !important;
}
#stats #overview, #stats #overview li { list-style:none;list-style-type:none;margin:0;padding:0; }
#stats #overview { overflow:auto;overflow:none;padding-left:45px;padding-bottom:1em !important; }
#stats #overview li { display:block;clear:left;padding:.2em 0; }
#stats #overview li strong, #stats #overview li span { display:block;float:left;padding:1px 5px; }
#stats #overview li strong { width:2em;text-align:right;background:#369;color:#fff;font-family: "hotel-solid"; }
#stats #thumb_first_timers, #stats #thumb_all { float:left;width:235px; }
</style>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1.0', {'packages':['corechart']});
  /* First-time viewings vs. Repeats vs. Walkouts */
  google.setOnLoadCallback(function(){
	var data = new google.visualization.DataTable();
	data.addColumn('string', 'Type');
	data.addColumn('number', 'Screenings');
	data.addRows([
	  ['First-time viewings', {{ stats.first_timers }}],
	  ['Repeat viewings', {{ stats.repeats }}],
	  ['Walkouts', {{ stats.walkouts }}]
	]);
	var options = {'title':'Overview'};
	var chart = new google.visualization.PieChart(document.getElementById('entry_overview'));
	chart.draw(data, options);
  });
  /* Theatrical venues (with Alamo grouped) */
  google.setOnLoadCallback(function(){
	var data = new google.visualization.DataTable();
	data.addColumn('string', 'Theater');
	data.addColumn('number', 'Screenings');
	data.addRows([{% for venue in stats.venues.all %}{% if venue.total > 0 %}
	  ['{{ venue.name|addslashes }}', {{ venue.total }}]{% if not forloop.last %},{% endif %}{% endif %}{% endfor %}	]);
	var options = {'title':'Theatrical Venues (with Alamo grouped)'};
	var chart = new google.visualization.PieChart(document.getElementById('venue_chart_div'));
	chart.draw(data, options);
  });
  /* Alamo-only venue breakout */
  google.setOnLoadCallback(function(){
	var data = new google.visualization.DataTable();
	data.addColumn('string', 'Theater');
	data.addColumn('number', 'Screenings');
	data.addRows([{% for venue in stats.venues.alamo %}{% if venue.total > 0 %}
	  ['{{ venue.name|addslashes }}', {{ venue.total }}]{% if not forloop.last %},{% endif %}{% endif %}{% endfor %}	]);
	var options = {'title':'Alamo-only venue breakout'};
	var chart = new google.visualization.PieChart(document.getElementById('alamo_chart_div'));
	chart.draw(data, options);
  });
{% if stats.dates %}/* Day-by-day screenings for month view */
  google.setOnLoadCallback(function(){
  	var date_from_str = function(date_str){
  		var d = date_str.split('-');
  		return new Date(d[0], d[1]-1, d[2]);
  	}
	var data = new google.visualization.DataTable();
	data.addColumn('date', 'Dates');
	data.addColumn('number', 'Screenings');
	data.addColumn({type: 'string', role: 'annotation'});
	data.addRows([{% for date in stats.dates %}
	  [date_from_str('{{ date.date }}'), {{ date.total }}, {% if date.date == '2012-04-29' %}'Moved to Austin'{% elif date.date == '2012-03-09' %}'SXSW 2012 starts'{% elif date.date == '2012-03-17' %}'SXSW 2012 ends'{% else %}''{% endif %}]{% if not forloop.last %},{% endif %}{% endfor %}
	]);
	var options = {title: 'Seen by date', legend: {position:'none'}};
	var chart = new google.visualization.LineChart(document.getElementById('entries_by_date'));
	chart.draw(data, options);
  });{% else %}  /* Month-by-month screenings for year view */
  google.setOnLoadCallback(function() {
	var data = google.visualization.arrayToDataTable([
	  ['Month', 'Screenings'],
{% for month in stats.months %}	  ['{{ month.month_abbr }} {{ month.year }}',  {{ month.total }}],
{% endfor %}	]);
	var options = {title: 'Movies per Month', legend: {position:'none'}};
	var chart = new google.visualization.ColumnChart(document.getElementById('entries_by_date'));
	chart.draw(data, options);
  });{% endif %}
  /* Thumb (including repeats & walkouts) */
  google.setOnLoadCallback(function(){
	var data = new google.visualization.DataTable();
	data.addColumn('string', 'Rating');
	data.addColumn('number', 'Screenings');
	data.addRows([
	  ['Up', {{ stats.thumb.all.up }}],
	  ['Down', {{ stats.thumb.all.down }}]
	]);
	// Set chart options
	var options = {'title':'Review (includes repeats & walkouts)', 'legend': {'position':'bottom'}};
	var chart = new google.visualization.PieChart(document.getElementById('thumb_all'));
	chart.draw(data, options);
  });
  /* Thumb (excluding repeats & walkouts) */
  google.setOnLoadCallback(function(){
	var data = new google.visualization.DataTable();
	data.addColumn('string', 'Rating');
	data.addColumn('number', 'Screenings');
	data.addRows([
	  ['Up', {{ stats.thumb.first_timers.up }}],
	  ['Down', {{ stats.thumb.first_timers.down }}]
	]);
	var options = {'title':'Review (excludes repeats & walkouts)', 'legend': {'position':'bottom'}};
	var chart = new google.visualization.PieChart(document.getElementById('thumb_first_timers'));
	chart.draw(data, options);
  });
  /* Theatrical rep vs. contemporary */
  google.setOnLoadCallback(function(){
	var data = new google.visualization.DataTable();
	data.addColumn('string', 'Type');
	data.addColumn('number', 'Screenings');
	data.addRows([
	  ['Current Releases', {{ stats.release_year.theatrical.current }}],
	  ['Repertory', {{ stats.release_year.theatrical.repertory }}]
	]);
	var options = {'title':'In Theaters: Current Releases vs. Repertory (Pre-{{ stats.release_year.threshold }})'};
	var chart = new google.visualization.PieChart(document.getElementById('screening_type'));
	chart.draw(data, options);
  });
  /* Theatrical vs. Video */
  google.setOnLoadCallback(function(){
	var data = new google.visualization.DataTable();
	data.addColumn('string', 'Type');
	data.addColumn('number', 'Screenings');
	data.addRows([
	  ['In Theaters', {{ stats.formats.theatrical.total }}],
	  ['On Video', {{ stats.formats.video }}]
	]);
	var options = {'title':'In Theaters vs. Home Video'};
	var chart = new google.visualization.PieChart(document.getElementById('theatrical_vs_video'));
	chart.draw(data, options);
  });
  /* Theatrical - Film vs. Digital */
  google.setOnLoadCallback(function(){
	var data = new google.visualization.DataTable();
	data.addColumn('string', 'Type');
	data.addColumn('number', 'Screenings');
	data.addRows([
	  ['Film Format', {{ stats.formats.theatrical.film }}],
	  ['Digital Format', {{ stats.formats.theatrical.digital }}]
	]);
	var options = {'title':'Theatrical-only format breakdown'};
	var chart = new google.visualization.PieChart(document.getElementById('theatrical_formats'));
	chart.draw(data, options);
  });
</script>
</head>
<body class="{% if stats.dates %}month{% else %}year{% endif %}-view">
<h1>{% if year < 2011 %}Some {% endif %}Films Seen in {{ stats.title }}</h1>
<form action="#" id="f">An {% if year < 2011 %}incomplete {% endif %}interactive list and data visualization of movies seen in 
<select onchange="location.href='/movies/'+this.value+location.search">
{% for option in years %}
<option{% if option == year and not stats.dates %} selected{% endif %}>{{ option }}</option>
{% if option == year %}
{% for month in months %}
<option value="{{ month.month }}"{% if stats.title == month.month_and_year %} selected{% endif %}>-{{ month.month_name|slice:":3" }}</option>
{% endfor %}
{% endif %}
{% endfor %}
</select> by <a href="http://zmcghee.com/">Zack McGhee</a>.</form>
<div id="c">
<div id="stats">
<ul id="overview">
<li id="total-seen"><strong>{{ stats.total_seen }}</strong><span> films seen in their entirety</span></li>
<li id="walkouts"><strong>{{ stats.walkouts }}</strong><span> walkout{{ stats.walkouts|pluralize }}</span></li>
<li id="in-3d"><strong>{{ stats.in_3d }}</strong><span> in 3D</span></li>
</ul>
<div id="entries_by_date"></div>
<div id="entry_overview"></div>
<div id="venue_chart_div"></div>
<div id="alamo_chart_div"></div>
<div id="screening_type"></div>
<div id="theatrical_vs_video"></div>
<div id="theatrical_formats"></div>
<div id="thumb_first_timers"></div>
<div id="thumb_all"></div>
</div>
<div id="log">
	<table cellpadding="0" cellspacing="0">
		<thead>
			<tr>
				<th class="count"><!-- Count --></th>
				<th class="date"><a href="/movies/{{ year }}{% if order_by == 'reverse' %}?order=date{% endif %}">Date</a></th>
				<th class="movie">{% if order_by != 'title' %}<a href="/movies/{{ year }}?order=title">{% endif %}Movie{% if order_by != 'title' %}</a>{% endif %}</th>
				<th class="rating">{% if order_by != 'rating' %}<a href="/movies/{{ year }}?order=rating">{% endif %}Rating{% if order_by != 'rating' %}</a>{% endif %}</th>
			</tr>
		</thead>
		<tbody>
{% for entry in entries %}
			<tr class="{% cycle 'odd' 'even' %}{% if entry.video %} video{% endif %}{% if entry.walkout %} walkout{% endif %}{% if entry.repeat %} repeat{% endif %}">
				<td class="count">{% if not entry.walkout %}<div>{% if order_by == 'reverse' %}{% iterator reverse %}{% else %}{% iterator 0 %}{% endif %}.</div>{% endif %}</td>
				<td class="date">
					<span class="month">{{ entry.date|date:"M" }} </span>
					<span class="day">{{ entry.date|date:"d" }}</span>
				</td>
				<td class="movie">
					<div class="m1"><div class="m2">
						<span class="movie-title">{% if entry.movie.imdb %}<a href="http://www.imdb.com/title/tt{{ entry.movie.imdb|zeroes:7 }}/" onclick="return imdb_ok();">{% endif %}{{ entry.movie.title }}{% if entry.movie.imdb %}</a>{% endif %}</span>
	{% if entry.version %}
						<span class="version"> [{{ entry.version }}]</span>
	{% endif %}
						<span class="premiere-year"> {{ entry.movie.premiere_year }}</span>
	{% if entry.movie.directors %}
						<span class="directors">Directed by {% for director in entry.movie.directors.all %}{% if entry.movie.directors|length > 1 %}{% if not forloop.first %}{% if not forloop.last %},{% else %} &{% endif %} {% endif %}{% endif %}{% if director.imdb %}<a href="http://www.imdb.com/name/nm{{ director.imdb|zeroes:7 }}/" onclick="return imdb_ok();">{% endif %}{{ director }}{% if director.imdb %}</a>{% endif %}{% endfor %}</span>
	{% endif %}
					</div></div>
				</td>
				<td class="rating">
{% if entry.recommended and not entry.walkout %}
					<img src="http://static.zmcghee.com/movies/thumb_up.png" alt="Thumb Up" />
{% elif not entry.walkout %}
					<img src="http://static.zmcghee.com/movies/thumb_down.png" alt="Thumb Down" />
{% endif %}
				</td>
			</tr>
{% endfor %}
		</tbody>
	</table>
</div>
<p><span class="non-mobile">Data visualization powered by <a href="https://developers.google.com/chart/">Google Charts</a>. <a href="http://findicons.com/icon/164547/control_repeat?id=166475">Repeat icon</a> by <a href="http://www.fatcow.com/">FatCow Web Hosting</a>. <a href="http://findicons.com/icon/207175/generic_vhs">Video icon</a> by Steven W. Smith. </span>Fonts by <a href="http://typekit.com">TypeKit</a>. Yes, that is my thumb.<br /><script>document.write('<'+'a'+' '+'h'+'r'+'e'+'f'+'='+"'"+'m'+'a'+'i'+'l'+'&'+'#'+'1'+'1'+'6'+';'+'&'+'#'+'1'+'1'+'1'+';'+
'&'+'#'+'5'+'8'+';'+'&'+'#'+'1'+'2'+'2'+';'+'%'+'6'+'1'+'c'+'k'+'&'+'#'+'4'+'6'+';'+'m'+'&'+'#'+'3'+
'7'+';'+'6'+'3'+'&'+'#'+'3'+'7'+';'+'&'+'#'+'5'+'4'+';'+'7'+'&'+'#'+'1'+'0'+'4'+';'+'e'+'%'+'&'+'#'+
'5'+'4'+';'+'5'+'&'+'#'+'6'+'4'+';'+'g'+'%'+'6'+'&'+'#'+'6'+'8'+';'+'%'+'6'+'1'+'i'+'l'+'%'+'2'+'E'+
'&'+'#'+'9'+'9'+';'+'o'+'m'+"'"+'>'+'&'+'#'+'1'+'2'+'2'+';'+'a'+'c'+'&'+'#'+'1'+'0'+'7'+';'+'&'+'#'+
'4'+'6'+';'+'m'+'c'+'&'+'#'+'1'+'0'+'3'+';'+'h'+'e'+'e'+'&'+'#'+'6'+'4'+';'+'g'+'m'+'a'+'i'+'l'+'&'+
'#'+'4'+'6'+';'+'c'+'o'+'m'+'<'+'/'+'a'+'>');</script></p>
</div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33720508-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
{% endspaceless %}